#
# Copyright (c) .NET Foundation and Contributors
# See LICENSE file in the project root for full license information.
#

# append Target files
list(APPEND TARGET_NORDIC_NANOCLR_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/targetHAL.cpp)
list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/targetHAL_Time.cpp)

list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/hardfault.c)
list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/platform_heap.c)

list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/platform_BlockStorage.c)
list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/target_BlockStorage_Zephyr.c)

list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/WireProtocol_ReceiverThread.c)
list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/WireProtocol_HAL_Interface.c)
list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/GenericPort_Write.cpp)

# append hard fault handler if the build type is to include debug info
#if(CMAKE_BUILD_TYPE STREQUAL "Debug" OR CMAKE_BUILD_TYPE STREQUAL "RelWithDebInfo")
#    list(APPEND TARGET_NORDIC_COMMON_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/hard_fault_handler.c)
#endif()

# append include directory for target Zephyr RTOS
list(APPEND TARGET_NORDIC_COMMON_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR})

# make vars global
set(TARGET_NORDIC_COMMON_INCLUDE_DIRS ${TARGET_NORDIC_COMMON_INCLUDE_DIRS} CACHE INTERNAL "make global")
set(TARGET_NORDIC_COMMON_SOURCES ${TARGET_NORDIC_COMMON_SOURCES} CACHE INTERNAL "make global")
set(TARGET_NORDIC_NANOCLR_SOURCES ${TARGET_NORDIC_NANOCLR_SOURCES} CACHE INTERNAL "make global")
